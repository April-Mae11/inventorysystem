<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>

<BorderPane xmlns="http://javafx.com/javafx/11.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.nva.printing.inventory.roles.HeadProductionController" styleClass="large-ui">
   <top>
      <VBox BorderPane.alignment="CENTER">
         <children>
            <!-- Header -->
            <HBox alignment="CENTER" style="-fx-background-color: #a70104; -fx-padding: 20;">
               <children>
                  <Label text="NVA Printing Services - Head Production Dashboard" textFill="WHITE" styleClass="header-title">
                     <font>
                        <Font name="System Bold" size="24.0" />
                     </font>
                  </Label>
               </children>
            </HBox>
            
            
            <!-- Menu Bar -->
            <MenuBar>
               <menus>
                  <Menu mnemonicParsing="false" text="File">
                     <items>
                        <MenuItem mnemonicParsing="false" onAction="#handleRefresh" text="Refresh Data" />
                        <SeparatorMenuItem mnemonicParsing="false" />
                        <MenuItem mnemonicParsing="false" text="Exit" onAction="#handleExit" />
                     </items>
                  </Menu>
                  <Menu mnemonicParsing="false" text="Inventory">
                     <items>
                        <MenuItem mnemonicParsing="false" onAction="#handleAddItem" text="Add New Item" />
                        <MenuItem mnemonicParsing="false" onAction="#handleEditItem" text="Edit Selected Item" />
                     </items>
                  </Menu>
                  <Menu mnemonicParsing="false" text="View">
                     <items>
                        <MenuItem mnemonicParsing="false" onAction="#handleClearFilters" text="Clear All Filters" />
                     </items>
                  </Menu>
                  <Menu mnemonicParsing="false" text="Account">
                     <items>
                        <MenuItem mnemonicParsing="false" onAction="#handleLogout" text="Logout" />
                     </items>
                  </Menu>
                  <Menu mnemonicParsing="false" text="Help">
                     <items>
                        <MenuItem mnemonicParsing="false" onAction="#handleAbout" text="About" />
                     </items>
                  </Menu>
               </menus>
            </MenuBar>
            
            <!-- Toolbar -->
            <ToolBar>
               <items>
                  <Button fx:id="addButton" mnemonicParsing="false" onAction="#handleAddItem" text="Add Item" styleClass="danger headproduction" />
                  <Button fx:id="editButton" mnemonicParsing="false" onAction="#handleEditItem" text="Edit Item" styleClass="danger headproduction" />
                  <Button fx:id="deleteButton" mnemonicParsing="false" onAction="#handleDeleteItem" text="Delete Item" styleClass="danger headproduction" />
                  <Button fx:id="archiveButton" mnemonicParsing="false" onAction="#handleArchiveSelected" text="Archive Item" />
                  <Separator orientation="VERTICAL" />
                  <Separator orientation="VERTICAL" />
                  <Button fx:id="stockInButton" mnemonicParsing="false" onAction="#handleStockIn" text="Stock In" styleClass="danger headproduction" />
                  <Button fx:id="stockOutButton" mnemonicParsing="false" onAction="#handleStockOut" text="Stock Out" styleClass="danger headproduction" />
                  <Button fx:id="viewArchiveButton" mnemonicParsing="false" onAction="#handleViewArchive" text="View Archive" styleClass="danger headproduction" />
                  <Button fx:id="viewHistoryButton" mnemonicParsing="false" onAction="#handleViewTransactions" text="View Transactions" styleClass="danger headproduction" />
                  <Button fx:id="refreshButton" mnemonicParsing="false" onAction="#handleRefresh" text="Refresh" styleClass="danger headproduction" />
                  <Separator orientation="VERTICAL" />
                  <Button fx:id="logoutButton" mnemonicParsing="false" onAction="#handleLogout" text="Logout" styleClass="danger" />
                  <Separator orientation="VERTICAL" />
                  <Label text="Search:" />
                  <TextField fx:id="searchField" prefWidth="200.0" promptText="Search items..." />
                  <Label text="Category:" />
                  <ComboBox fx:id="categoryFilter" prefWidth="150.0" />
                  <!-- Stack Level filter removed -->
                  <CheckBox fx:id="lowStockFilter" mnemonicParsing="false" text="Low Stock Only" />
                  <CheckBox fx:id="outOfStockFilter" mnemonicParsing="false" text="Out of Stock Only" />
                  <Button mnemonicParsing="false" onAction="#handleClearFilters" text="Clear Filters" styleClass="headproduction" />
               </items>
            </ToolBar>
         </children>
      </VBox>
   </top>
   
   <center>
      <!-- Main Table -->
      <TableView fx:id="inventoryTable" BorderPane.alignment="CENTER">
         <columns>
            <TableColumn fx:id="nameColumn" prefWidth="150.0" text="Item Name" />
            <TableColumn fx:id="categoryColumn" prefWidth="120.0" text="Category" />
            <TableColumn fx:id="descriptionColumn" prefWidth="200.0" text="Description" />
            <TableColumn fx:id="quantityColumn" prefWidth="80.0" text="Quantity" />
            <TableColumn fx:id="minStockColumn" prefWidth="90.0" text="Min Stock" />
            <TableColumn fx:id="priceColumn" prefWidth="100.0" text="Unit Price" />
            <TableColumn fx:id="supplierColumn" prefWidth="150.0" text="Supplier" />
            <TableColumn fx:id="stockInColumn" prefWidth="80.0" text="Stock In" />
            <TableColumn fx:id="stockOutColumn" prefWidth="80.0" text="Stock Out" />
            <TableColumn fx:id="lastUpdatedColumn" prefWidth="130.0" text="Last Updated" />
            <TableColumn fx:id="statusColumn" prefWidth="100.0" text="Status" />
         </columns>
         <columnResizePolicy>
            <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
         </columnResizePolicy>
      </TableView>
   </center>
   
   <bottom>
      <!-- Status Bar -->
      <VBox BorderPane.alignment="CENTER">
         <children>
            <Separator />
            <HBox alignment="CENTER_LEFT" spacing="20.0" style="-fx-background-color: #f5f5f5; -fx-padding: 10;">
               <children>
                  <Label fx:id="userInfoLabel" style="-fx-font-weight: bold; -fx-text-fill: #a70104;" text="Logged in as: Head Production" />
                  <Separator orientation="VERTICAL" />
                  <Label text="Statistics:" style="-fx-font-weight: bold;" />
                  <Label text="Total Items:" />
                  <Label fx:id="totalItemsLabel" style="-fx-font-weight: bold; -fx-text-fill: #1976D2;" text="0" />
                  <Separator orientation="VERTICAL" />
                  <Label text="Low Stock Items:" />
                  <Label fx:id="lowStockItemsLabel" style="-fx-font-weight: bold; -fx-text-fill: #D32F2F;" text="0" />
                  <Separator orientation="VERTICAL" />
                  <Label text="Total Value:" />
                  <Label fx:id="totalValueLabel" styleClass="total-value" style="-fx-font-weight: bold;" text="â‚±0.00" />
                  <Separator orientation="VERTICAL" />
                  <Label text="Total Item Quantity:" />
                  <Label fx:id="totalQuantityLabel" style="-fx-font-weight: bold; -fx-text-fill: #F57C00;" text="0" />
               </children>
               <padding>
                  <Insets bottom="5.0" left="10.0" right="10.0" top="5.0" />
               </padding>
            </HBox>
         </children>
      </VBox>
   </bottom>
</BorderPane>
